串口通信
===========
什么是串行通信
-------------------
- UART，SPI，IIC，USB等等都属于串行通信，一般来说串行通信都是一个时间点只发送一个位，而并行通信，是可以达到一个时间点可以发送一个位以上

- 串口通信协议实际上是一种特定的通信协议

- 串行通信的特点:异步，串行， 全双工

- 串口通信的接线：RXD（接收线） TXD（发送线） GND(地)

串口通信的特点
--------------------
- 全双工通信，串口通信的接线方式决定了，TXD接RXD，RXD接TXD，这个时候发送和接收都是独立控制，互不干扰

- GND作为串口通信的参考电平，根据这个参考电平，MCU才知道现在发送的是高电平还是低电平

- 串口通信是电平通信，所以容易被干扰，适合短距离通信

- 一般我们的串口只需要接上RXD和TXD，所以是没有流控以及速度适配的，但是在DB9的接口还是存在速度适配，流控功能是否存在还需要看硬件有无接口

- 发送方有发送移位寄存器，接收方有接收移位寄存器。需要对串口数据进行逐位发送。
::

	而串行通信的最小单位是Bit，每次只能发送一个Bit

	假如此时我们需要发送的字节为 0100 1000，那么把数据方到发送移位寄存器中，寄存器就会帮助我们把数据一位一位发送出去

	发送寄存器和接收寄存器共同实现了自动发送和接收

串口通信的相关概念
----------------------
- 串口数据格式
::
	
	实际上就是一个数据的集合，数据格式为：起始位 数据位 奇偶校验位 停止位
	
	串口通信开始之前，会先发送一个起始位，告诉对方，串口通信准备开始，
	
	然后发送对应的数据位和奇偶校验位以，最后发送停止位，告诉对方，本次通信结束

- 波特率
::
	波特率代表的是串行通信的速度，也就是多长时间发送一个位

	波特率代表的就是1s传输多少个比特位，9600 代表1s发送9600个bit 位

	波特率设置越高，容易出错，抗干扰能力就越弱
	

软件模拟串口
------------
::

	模拟串口，实际上就是通过软件的计数/延时/中断来实现硬件串口功能

	因为串口是电平通信，所以各种数据实际上都可以用0/1来表示

	而波特率，实际上为每个电平持续的时间，

	比如波特率为9600，根据波特率的定义，那么每一位传递的时间即为：1000ms/9600 约等于 0.104ms

	也就是上一个位（电平）和下一个位（电平）之间的延时位0.104ms,而单片机的延时一般用各种空语句(nop)来实现

	而指令周期就等于 （(1000000） / 9600）/ (12/freq) 其中freq = 晶振频率